<div class="flex justify-between items-center mb-6">
    <input
      matInput
      (keyup)="applyFilter($event)"
      placeholder="Search records"
      #input
      class="px-4 py-2 border rounded-lg shadow-sm flex-grow mr-4"
    />
    <!-- Add Record Button -->
    <button
      class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition duration-300"
      (click)="openAddUserForm()"
    >
      Add Record
    </button>
  </div>

  <!-- Add User Form -->
  <div *ngIf="isAddFormVisible" class="mb-4">
    <form [formGroup]="addUserForm" (ngSubmit)="onSubmit()">
      <div class="mb-2">
        <label for="name" class="block text-sm font-medium text-gray-700">Name</label>
        <input
          formControlName="name"
          id="name"
          type="text"
          class="mt-1 p-2 border rounded-lg"
        />
      </div>
      <div class="mb-2">
        <label for="departmentType" class="block text-sm font-medium text-gray-700">Department Type</label>
        <input
          formControlName="departmentType"
          id="departmentType"
          type="text"
          class="mt-1 p-2 border rounded-lg"
        />
      </div>
      <div class="mb-2">
        <label for="startYear" class="block text-sm font-medium text-gray-700">Start Year</label>
        <input
          formControlName="startYear"
          id="startYear"
          type="number"
          class="mt-1 p-2 border rounded-lg"
        />
      </div>
      <div class="mb-2">
        <label for="endYear" class="block text-sm font-medium text-gray-700">End Year</label>
        <input
          formControlName="endYear"
          id="endYear"
          type="number"
          class="mt-1 p-2 border rounded-lg"
        />
      </div>
      <!-- Add Competencies -->
      <div class="mb-2">
        <label for="competencies" class="block text-sm font-medium text-gray-700">Competencies (ID)</label>
        <input
          formControlName="competencies"
          id="competencies"
          type="text"
          class="mt-1 p-2 border rounded-lg"
          placeholder="Enter competency ID"
        />
      </div>
      <!-- Add Goals -->
      <div class="mb-2">
        <label for="goals" class="block text-sm font-medium text-gray-700">Goals</label>
        <input
          formControlName="goals"
          id="goals"
          type="text"
          class="mt-1 p-2 border rounded-lg"
          placeholder="Enter goal details"
        />
      </div>

      <button
        type="submit"
        class="bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600"
      >
        Add Record
      </button>
    </form>
  </div>

  <!-- Edit Form -->
  <div *ngIf="isEditFormVisible">
    <form [formGroup]="editUserForm" (ngSubmit)="onEditSubmit()">
      <label>
        Name:
        <input formControlName="name" type="text" />
      </label>
      <label>
        Department Type:
        <input formControlName="departmentType" type="text" />
      </label>
      <label>
        Start Year:
        <input formControlName="startYear" type="number" />
      </label>
      <label>
        End Year:
        <input formControlName="endYear" type="number" />
      </label>
      <label>
        Competencies:
        <input formControlName="competencies" type="text" />
      </label>
      <label>
        Goals:
        <input formControlName="goals" type="text" />
      </label>
      <button type="submit">Save</button>
      <button type="button" (click)="cancelEdit()">Cancel</button>
    </form>
  </div>
  
  <div class="overflow-x-auto bg-white rounded-lg shadow-lg">
    <table class="min-w-full divide-y divide-gray-200">
      <thead class="bg-gray-50">
        <tr>
          <th *ngFor="let header of headers" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
            {{ header }}
          </th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-gray-200">
        <tr *ngFor="let record of performanceReviews">
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ record.id }}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ record.departmentType }}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ record.startYear }} - {{ record.endYear }}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ record.startDate }}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ record.endDate }}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ record.name }}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ record.supervisorId }}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
            <button class="text-indigo-600 hover:text-indigo-900 mr-3">
              <i-lucide [img]="Edit" class="w-5 h-5" (click)="openEditForm(record)"></i-lucide>
            </button>
            <button class="text-red-600 hover:text-red-900" (click)="deleteRecord(record.id)">
              <i-lucide [img]="Trash" class="w-5 h-5"></i-lucide>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>